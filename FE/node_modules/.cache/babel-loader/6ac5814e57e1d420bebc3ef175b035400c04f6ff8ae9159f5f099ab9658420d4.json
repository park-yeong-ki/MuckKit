{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport http from \"@/api/http\";\nimport PlanListItemVue from \"./plan-item/PlanListItem.vue\";\nexport default {\n  components: {\n    PlanListItemVue\n  },\n  computed: {\n    memberId() {\n      return this.$store.getters.getMemberId;\n    }\n  },\n  data() {\n    return {\n      hashtagList: [],\n      planList: [],\n      tag: \"\",\n      plan: {\n        title: \"\",\n        startDate: \"\",\n        endDate: \"\",\n        description: \"\",\n        hashtag: []\n      }\n    };\n  },\n  created() {\n    http.get(\"/plan\").then(resp => {\n      this.hashtagList = resp.data.hashtags;\n      this.planList = resp.data.plans;\n    }).catch(error => {\n      console.log(error);\n    });\n  },\n  methods: {\n    removeHashtag(idx) {\n      this.plan.hashtag.splice(idx, 1);\n    },\n    addHashtag() {\n      this.plan.hashtag.push({\n        tagName: this.tag\n      });\n      this.tag = \"\";\n    },\n    searchByHashtag(hashtagId) {\n      http.get(\"/plan/hashtag/\" + hashtagId).then(resp => {\n        this.hashtagList = resp.data.hashtags;\n        this.planList = resp.data.plans;\n      }).then(error => {\n        console.log(error);\n      });\n    },\n    resetModal() {\n      this.plan.title = \"\";\n      this.plan.description = \"\";\n      this.plan.startDate = \"\";\n      this.plan.endDate = \"\";\n      this.tag = \"\";\n      this.plan.hashtag = [];\n    },\n    handleOk(bvModalEvent) {\n      // Prevent modal from closing\n      bvModalEvent.preventDefault();\n      // Trigger submit handler\n      // this.handleSubmit();\n      // this.$router.push(\"view\");\n      this.handleSubmit();\n    },\n    handleSubmit() {\n      // Exit when the form isn't valid\n      if (!this.plan.title || !this.plan.description || !this.plan.startDate || !this.plan.endDate || this.plan.hashtag.length === 0) {\n        alert(\"양식을 모두 입력해주세요.\");\n        return;\n      }\n      this.$store.dispatch(\"planData\", this.plan);\n      this.$router.push({\n        name: \"planwrite\"\n      });\n    }\n  }\n};","map":{"version":3,"names":["http","PlanListItemVue","components","computed","memberId","$store","getters","getMemberId","data","hashtagList","planList","tag","plan","title","startDate","endDate","description","hashtag","created","get","then","resp","hashtags","plans","catch","error","console","log","methods","removeHashtag","idx","splice","addHashtag","push","tagName","searchByHashtag","hashtagId","resetModal","handleOk","bvModalEvent","preventDefault","handleSubmit","length","alert","dispatch","$router","name"],"sources":["src/components/board/Plan/PlanList.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <h2 onclick=\"location.href='/plan/list';\">플랜</h2>\r\n    <section class=\"py-5\">\r\n      <div class=\"text-right\">\r\n        <div>\r\n          <b-button\r\n            v-b-modal.modal-prevent-closing\r\n            style=\"background-color: orange; border-color: orange\"\r\n            v-if=\"memberId\"\r\n            >플랜 만들기</b-button\r\n          >\r\n\r\n          <b-modal\r\n            id=\"modal-prevent-closing\"\r\n            ref=\"modal\"\r\n            title=\"플랜 만들기\"\r\n            @show=\"resetModal\"\r\n            @hidden=\"resetModal\"\r\n            @ok=\"handleOk\"\r\n            ok-title=\"확인\"\r\n            ok-variant=\"primary\"\r\n            cancel-title=\"취소\"\r\n            cancel-variant=\"secondary\"\r\n          >\r\n            <form ref=\"form\" @submit.stop.prevent=\"handleSubmit\">\r\n              <b-form-group label=\"제목\" label-for=\"title-input\">\r\n                <b-form-input id=\"title-input\" v-model=\"plan.title\" required></b-form-input>\r\n              </b-form-group>\r\n              <b-form-group label=\"설명\" label-for=\"description-input\">\r\n                <b-form-input\r\n                  id=\"description-input\"\r\n                  v-model=\"plan.description\"\r\n                  required\r\n                ></b-form-input>\r\n              </b-form-group>\r\n              <b-form-group label=\"여행 출발 일자\" label-for=\"startDate-input\">\r\n                <b-form-input\r\n                  id=\"startDate-input\"\r\n                  v-model=\"plan.startDate\"\r\n                  required\r\n                  type=\"date\"\r\n                ></b-form-input>\r\n              </b-form-group>\r\n              <b-form-group label=\"여행 도착 일자\" label-for=\"endDate-input\">\r\n                <b-form-input\r\n                  id=\"endDate-input\"\r\n                  v-model=\"plan.endDate\"\r\n                  required\r\n                  type=\"date\"\r\n                ></b-form-input>\r\n              </b-form-group>\r\n              <b-form-group label=\"해시태그\" label-for=\"hashtag-input\">\r\n                <b-form-input\r\n                  id=\"hashtag-input\"\r\n                  v-model=\"tag\"\r\n                  required\r\n                  @keypress.enter=\"addHashtag\"\r\n                >\r\n                </b-form-input>\r\n              </b-form-group>\r\n              <button\r\n                class=\"btn btn-light rounded-pill px-2\"\r\n                type=\"button\"\r\n                v-for=\"(tag, idx) in plan.hashtag\"\r\n                :key=\"idx\"\r\n                @click=\"removeHashtag(idx)\"\r\n              >\r\n                #{{ tag.tagName }}\r\n              </button>\r\n            </form>\r\n          </b-modal>\r\n\r\n          <div class=\"d-flex gap-2 justify-content-center py-5\">\r\n            <!-- 해시태그 반복문 돌릴것 10개 -->\r\n            <button\r\n              class=\"btn btn-light rounded-pill px-3 ml-3\"\r\n              type=\"button\"\r\n              v-for=\"(hashtag, idx) in hashtagList\"\r\n              :key=\"idx\"\r\n              @click=\"searchByHashtag(hashtag.hashtagId)\"\r\n            >\r\n              #{{ hashtag.tagName }}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"container px-12 px-lg-10 mt-5\">\r\n        <div class=\"row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center\">\r\n          <plan-list-item-vue\r\n            v-for=\"(plan, idx) in planList\"\r\n            :key=\"idx\"\r\n            :pl=\"plan\"\r\n          ></plan-list-item-vue>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport http from \"@/api/http\";\r\nimport PlanListItemVue from \"./plan-item/PlanListItem.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    PlanListItemVue,\r\n  },\r\n  computed: {\r\n    memberId() {\r\n      return this.$store.getters.getMemberId;\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      hashtagList: [],\r\n      planList: [],\r\n      tag: \"\",\r\n      plan: {\r\n        title: \"\",\r\n        startDate: \"\",\r\n        endDate: \"\",\r\n        description: \"\",\r\n        hashtag: [],\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    http\r\n      .get(\"/plan\")\r\n      .then((resp) => {\r\n        this.hashtagList = resp.data.hashtags;\r\n        this.planList = resp.data.plans;\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  },\r\n  methods: {\r\n    removeHashtag(idx) {\r\n      this.plan.hashtag.splice(idx, 1);\r\n    },\r\n    addHashtag() {\r\n      this.plan.hashtag.push({ tagName: this.tag });\r\n      this.tag = \"\";\r\n    },\r\n    searchByHashtag(hashtagId) {\r\n      http\r\n        .get(\"/plan/hashtag/\" + hashtagId)\r\n        .then((resp) => {\r\n          this.hashtagList = resp.data.hashtags;\r\n          this.planList = resp.data.plans;\r\n        })\r\n        .then((error) => {\r\n          console.log(error);\r\n        });\r\n    },\r\n    resetModal() {\r\n      this.plan.title = \"\";\r\n      this.plan.description = \"\";\r\n      this.plan.startDate = \"\";\r\n      this.plan.endDate = \"\";\r\n      this.tag = \"\";\r\n      this.plan.hashtag = [];\r\n    },\r\n    handleOk(bvModalEvent) {\r\n      // Prevent modal from closing\r\n      bvModalEvent.preventDefault();\r\n      // Trigger submit handler\r\n      // this.handleSubmit();\r\n      // this.$router.push(\"view\");\r\n      this.handleSubmit();\r\n    },\r\n    handleSubmit() {\r\n      // Exit when the form isn't valid\r\n      if (\r\n        !this.plan.title ||\r\n        !this.plan.description ||\r\n        !this.plan.startDate ||\r\n        !this.plan.endDate ||\r\n        this.plan.hashtag.length === 0\r\n      ) {\r\n        alert(\"양식을 모두 입력해주세요.\");\r\n        return;\r\n      }\r\n      this.$store.dispatch(\"planData\", this.plan);\r\n\r\n      this.$router.push({\r\n        name: \"planwrite\",\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped></style>\r\n"],"mappings":";AAqGA,OAAAA,IAAA;AACA,OAAAC,eAAA;AAEA;EACAC,UAAA;IACAD;EACA;EACAE,QAAA;IACAC,SAAA;MACA,YAAAC,MAAA,CAAAC,OAAA,CAAAC,WAAA;IACA;EACA;EACAC,KAAA;IACA;MACAC,WAAA;MACAC,QAAA;MACAC,GAAA;MACAC,IAAA;QACAC,KAAA;QACAC,SAAA;QACAC,OAAA;QACAC,WAAA;QACAC,OAAA;MACA;IACA;EACA;EACAC,QAAA;IACAlB,IAAA,CACAmB,GAAA,UACAC,IAAA,CAAAC,IAAA;MACA,KAAAZ,WAAA,GAAAY,IAAA,CAAAb,IAAA,CAAAc,QAAA;MACA,KAAAZ,QAAA,GAAAW,IAAA,CAAAb,IAAA,CAAAe,KAAA;IACA,GACAC,KAAA,CAAAC,KAAA;MACAC,OAAA,CAAAC,GAAA,CAAAF,KAAA;IACA;EACA;EACAG,OAAA;IACAC,cAAAC,GAAA;MACA,KAAAlB,IAAA,CAAAK,OAAA,CAAAc,MAAA,CAAAD,GAAA;IACA;IACAE,WAAA;MACA,KAAApB,IAAA,CAAAK,OAAA,CAAAgB,IAAA;QAAAC,OAAA,OAAAvB;MAAA;MACA,KAAAA,GAAA;IACA;IACAwB,gBAAAC,SAAA;MACApC,IAAA,CACAmB,GAAA,oBAAAiB,SAAA,EACAhB,IAAA,CAAAC,IAAA;QACA,KAAAZ,WAAA,GAAAY,IAAA,CAAAb,IAAA,CAAAc,QAAA;QACA,KAAAZ,QAAA,GAAAW,IAAA,CAAAb,IAAA,CAAAe,KAAA;MACA,GACAH,IAAA,CAAAK,KAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,KAAA;MACA;IACA;IACAY,WAAA;MACA,KAAAzB,IAAA,CAAAC,KAAA;MACA,KAAAD,IAAA,CAAAI,WAAA;MACA,KAAAJ,IAAA,CAAAE,SAAA;MACA,KAAAF,IAAA,CAAAG,OAAA;MACA,KAAAJ,GAAA;MACA,KAAAC,IAAA,CAAAK,OAAA;IACA;IACAqB,SAAAC,YAAA;MACA;MACAA,YAAA,CAAAC,cAAA;MACA;MACA;MACA;MACA,KAAAC,YAAA;IACA;IACAA,aAAA;MACA;MACA,IACA,MAAA7B,IAAA,CAAAC,KAAA,IACA,MAAAD,IAAA,CAAAI,WAAA,IACA,MAAAJ,IAAA,CAAAE,SAAA,IACA,MAAAF,IAAA,CAAAG,OAAA,IACA,KAAAH,IAAA,CAAAK,OAAA,CAAAyB,MAAA,QACA;QACAC,KAAA;QACA;MACA;MACA,KAAAtC,MAAA,CAAAuC,QAAA,kBAAAhC,IAAA;MAEA,KAAAiC,OAAA,CAAAZ,IAAA;QACAa,IAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}