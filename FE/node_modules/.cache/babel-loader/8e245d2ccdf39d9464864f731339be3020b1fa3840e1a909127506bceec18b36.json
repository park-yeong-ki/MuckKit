{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport http from \"@/api/http\";\nimport router from \"@/router\";\nexport default {\n  components: {},\n  data() {\n    return {\n      memberPw: \"\",\n      memberName: \"\",\n      memberPhone: \"\",\n      confirmPw: \"\"\n    };\n  },\n  created() {},\n  methods: {\n    deleteMember() {\n      if (confirm(\"회원탈퇴를 진행하시겠습니까?\")) {\n        http.delete(\"/member/\" + this.getMemberId, {\n          headers: {\n            Authorization: \"Bearer \" + sessionStorage.getItem(\"access-token\")\n          }\n        }).then(resp => {\n          console.log(resp);\n          alert(\"회원 탈퇴가 완료되었습니다.\");\n          this.$store.dispatch(\"memberLogout\");\n          router.push({\n            name: \"main\"\n          });\n        }).catch(error => {\n          console.log(error);\n          alert(\"회원 탈퇴가 실패하였습니다.\");\n        });\n      }\n    },\n    modifyMember() {\n      if (this.checkPassword && this.validMemberPw && this.validMemberName && this.validMemberPhone) {\n        http.put(\"/member/modify\", {\n          memberId: this.getMemberId,\n          memberPw: this.memberPw,\n          memberName: this.memberName,\n          memberPhone: this.memberPhone\n        }, {\n          headers: {\n            Authorization: \"Bearer \" + sessionStorage.getItem(\"access-token\")\n          }\n        }).then(resp => {\n          console.log(resp);\n          alert(\"회원정보가 수정되었습니다.\");\n          router.push({\n            name: \"mypage\"\n          });\n        }).catch(error => {\n          console.log(error);\n          alert(\"회원정보 수정에 실패하였습니다.\");\n        });\n      } else {\n        alert(\"회원정보를 입력하세요.\");\n      }\n    }\n  },\n  computed: {\n    getMemberId() {\n      return this.$store.getters.getMemberId;\n    },\n    getMemberName() {\n      return this.$store.getters.getMemberName;\n    },\n    getMemberPhone() {\n      return this.$store.getters.getMemberPhone;\n    },\n    checkPassword() {\n      if (this.confirmPw === \"\") {\n        return null;\n      }\n      return this.confirmPw === this.memberPw;\n    },\n    validMemberPw() {\n      if (this.memberPw === \"\") {\n        return null;\n      }\n      return this.memberPw.length > 3 && this.memberPw.length < 20;\n    },\n    validMemberName() {\n      if (this.memberName === \"\") {\n        return null;\n      }\n      return this.memberName.length > 0 && this.memberName.length < 10;\n    },\n    validMemberPhone() {\n      if (this.memberPhone === \"\") {\n        return null;\n      }\n      let regPhone = /^[0-9]{2,3}-[0-9]{3,4}-[0-9]{4}$/;\n      return regPhone.test(this.memberPhone);\n    }\n  }\n};","map":{"version":3,"names":["http","router","components","data","memberPw","memberName","memberPhone","confirmPw","created","methods","deleteMember","confirm","delete","getMemberId","headers","Authorization","sessionStorage","getItem","then","resp","console","log","alert","$store","dispatch","push","name","catch","error","modifyMember","checkPassword","validMemberPw","validMemberName","validMemberPhone","put","memberId","computed","getters","getMemberName","getMemberPhone","length","regPhone","test"],"sources":["src/components/user/UserModify.vue"],"sourcesContent":["<template>\r\n  <div class=\"container col-xl-10 col-xxl-8 px-4 py-5\">\r\n    <div class=\"row align-items-center py-5\">\r\n      <!-- <div class=\"col-lg-7 text-center text-lg-start\"></div> -->\r\n      <div class=\"col-md-10 mx-auto col-lg-6\">\r\n        <h1 class=\"display-4 fw-bold lh-1 text-body-emphasis mb-3\">회원정보 수정</h1>\r\n        <form class=\"p-4 p-md-5 border rounded-3 bg-body-tertiary\">\r\n          <b-container fluid>\r\n            <b-row class=\"my-4\">\r\n              <b-col>\r\n                <b-form-input\r\n                  id=\"input-none\"\r\n                  placeholder=\"이메일\"\r\n                  :value=\"getMemberId\"\r\n                  :readonly=\"true\"\r\n                ></b-form-input>\r\n              </b-col>\r\n            </b-row>\r\n            <b-row class=\"my-4\">\r\n              <b-col>\r\n                <b-form-input\r\n                  id=\"input-none\"\r\n                  :state=\"validMemberPw\"\r\n                  placeholder=\"비밀번호\"\r\n                  type=\"password\"\r\n                  v-model=\"memberPw\"\r\n                ></b-form-input>\r\n              </b-col>\r\n            </b-row>\r\n            <b-row class=\"my-4\">\r\n              <b-col>\r\n                <b-form-input\r\n                  id=\"input-none\"\r\n                  :state=\"checkPassword\"\r\n                  placeholder=\"비밀번호 확인\"\r\n                  v-model=\"confirmPw\"\r\n                  type=\"password\"\r\n                ></b-form-input>\r\n              </b-col>\r\n            </b-row>\r\n            <b-row class=\"my-4\">\r\n              <b-col>\r\n                <b-form-input\r\n                  id=\"input-none\"\r\n                  :state=\"validMemberName\"\r\n                  placeholder=\"이름\"\r\n                  v-model=\"memberName\"\r\n                ></b-form-input>\r\n              </b-col>\r\n            </b-row>\r\n            <b-row class=\"my-4\">\r\n              <b-col>\r\n                <b-form-input\r\n                  id=\"input-none\"\r\n                  :state=\"validMemberPhone\"\r\n                  placeholder=\"연락처\"\r\n                  v-model=\"memberPhone\"\r\n                  type=\"tel\"\r\n                ></b-form-input>\r\n              </b-col>\r\n            </b-row>\r\n          </b-container>\r\n          <button\r\n            class=\"w-100 btn btn-lg\"\r\n            style=\"background-color: orange\"\r\n            @click=\"modifyMember\"\r\n            type=\"button\"\r\n          >\r\n            수정하기\r\n          </button>\r\n          <button\r\n            class=\"w-100 btn btn-lg mt-2\"\r\n            style=\"background-color: orange\"\r\n            @click=\"deleteMember\"\r\n            type=\"button\"\r\n          >\r\n            탈퇴하기\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport http from \"@/api/http\";\r\nimport router from \"@/router\";\r\n\r\nexport default {\r\n  components: {},\r\n  data() {\r\n    return {\r\n      memberPw: \"\",\r\n      memberName: \"\",\r\n      memberPhone: \"\",\r\n      confirmPw: \"\",\r\n    };\r\n  },\r\n  created() {},\r\n  methods: {\r\n    deleteMember() {\r\n      if (confirm(\"회원탈퇴를 진행하시겠습니까?\")) {\r\n        http\r\n          .delete(\"/member/\" + this.getMemberId, {\r\n            headers: {\r\n              Authorization: \"Bearer \" + sessionStorage.getItem(\"access-token\"),\r\n            },\r\n          })\r\n          .then((resp) => {\r\n            console.log(resp);\r\n            alert(\"회원 탈퇴가 완료되었습니다.\");\r\n            this.$store.dispatch(\"memberLogout\");\r\n            router.push({ name: \"main\" });\r\n          })\r\n          .catch((error) => {\r\n            console.log(error);\r\n            alert(\"회원 탈퇴가 실패하였습니다.\");\r\n          });\r\n      }\r\n    },\r\n    modifyMember() {\r\n      if (\r\n        this.checkPassword &&\r\n        this.validMemberPw &&\r\n        this.validMemberName &&\r\n        this.validMemberPhone\r\n      ) {\r\n        http\r\n          .put(\r\n            \"/member/modify\",\r\n            {\r\n              memberId: this.getMemberId,\r\n              memberPw: this.memberPw,\r\n              memberName: this.memberName,\r\n              memberPhone: this.memberPhone,\r\n            },\r\n            {\r\n              headers: {\r\n                Authorization: \"Bearer \" + sessionStorage.getItem(\"access-token\"),\r\n              },\r\n            }\r\n          )\r\n          .then((resp) => {\r\n            console.log(resp);\r\n            alert(\"회원정보가 수정되었습니다.\");\r\n            router.push({ name: \"mypage\" });\r\n          })\r\n          .catch((error) => {\r\n            console.log(error);\r\n            alert(\"회원정보 수정에 실패하였습니다.\");\r\n          });\r\n      } else {\r\n        alert(\"회원정보를 입력하세요.\");\r\n      }\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    getMemberId() {\r\n      return this.$store.getters.getMemberId;\r\n    },\r\n    getMemberName() {\r\n      return this.$store.getters.getMemberName;\r\n    },\r\n    getMemberPhone() {\r\n      return this.$store.getters.getMemberPhone;\r\n    },\r\n    checkPassword() {\r\n      if (this.confirmPw === \"\") {\r\n        return null;\r\n      }\r\n\r\n      return this.confirmPw === this.memberPw;\r\n    },\r\n    validMemberPw() {\r\n      if (this.memberPw === \"\") {\r\n        return null;\r\n      }\r\n      return this.memberPw.length > 3 && this.memberPw.length < 20;\r\n    },\r\n    validMemberName() {\r\n      if (this.memberName === \"\") {\r\n        return null;\r\n      }\r\n      return this.memberName.length > 0 && this.memberName.length < 10;\r\n    },\r\n    validMemberPhone() {\r\n      if (this.memberPhone === \"\") {\r\n        return null;\r\n      }\r\n      let regPhone = /^[0-9]{2,3}-[0-9]{3,4}-[0-9]{4}$/;\r\n      return regPhone.test(this.memberPhone);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped></style>\r\n"],"mappings":";AAqFA,OAAAA,IAAA;AACA,OAAAC,MAAA;AAEA;EACAC,UAAA;EACAC,KAAA;IACA;MACAC,QAAA;MACAC,UAAA;MACAC,WAAA;MACAC,SAAA;IACA;EACA;EACAC,QAAA;EACAC,OAAA;IACAC,aAAA;MACA,IAAAC,OAAA;QACAX,IAAA,CACAY,MAAA,mBAAAC,WAAA;UACAC,OAAA;YACAC,aAAA,cAAAC,cAAA,CAAAC,OAAA;UACA;QACA,GACAC,IAAA,CAAAC,IAAA;UACAC,OAAA,CAAAC,GAAA,CAAAF,IAAA;UACAG,KAAA;UACA,KAAAC,MAAA,CAAAC,QAAA;UACAvB,MAAA,CAAAwB,IAAA;YAAAC,IAAA;UAAA;QACA,GACAC,KAAA,CAAAC,KAAA;UACAR,OAAA,CAAAC,GAAA,CAAAO,KAAA;UACAN,KAAA;QACA;MACA;IACA;IACAO,aAAA;MACA,IACA,KAAAC,aAAA,IACA,KAAAC,aAAA,IACA,KAAAC,eAAA,IACA,KAAAC,gBAAA,EACA;QACAjC,IAAA,CACAkC,GAAA,CACA,kBACA;UACAC,QAAA,OAAAtB,WAAA;UACAT,QAAA,OAAAA,QAAA;UACAC,UAAA,OAAAA,UAAA;UACAC,WAAA,OAAAA;QACA,GACA;UACAQ,OAAA;YACAC,aAAA,cAAAC,cAAA,CAAAC,OAAA;UACA;QACA,CACA,EACAC,IAAA,CAAAC,IAAA;UACAC,OAAA,CAAAC,GAAA,CAAAF,IAAA;UACAG,KAAA;UACArB,MAAA,CAAAwB,IAAA;YAAAC,IAAA;UAAA;QACA,GACAC,KAAA,CAAAC,KAAA;UACAR,OAAA,CAAAC,GAAA,CAAAO,KAAA;UACAN,KAAA;QACA;MACA;QACAA,KAAA;MACA;IACA;EACA;EAEAc,QAAA;IACAvB,YAAA;MACA,YAAAU,MAAA,CAAAc,OAAA,CAAAxB,WAAA;IACA;IACAyB,cAAA;MACA,YAAAf,MAAA,CAAAc,OAAA,CAAAC,aAAA;IACA;IACAC,eAAA;MACA,YAAAhB,MAAA,CAAAc,OAAA,CAAAE,cAAA;IACA;IACAT,cAAA;MACA,SAAAvB,SAAA;QACA;MACA;MAEA,YAAAA,SAAA,UAAAH,QAAA;IACA;IACA2B,cAAA;MACA,SAAA3B,QAAA;QACA;MACA;MACA,YAAAA,QAAA,CAAAoC,MAAA,aAAApC,QAAA,CAAAoC,MAAA;IACA;IACAR,gBAAA;MACA,SAAA3B,UAAA;QACA;MACA;MACA,YAAAA,UAAA,CAAAmC,MAAA,aAAAnC,UAAA,CAAAmC,MAAA;IACA;IACAP,iBAAA;MACA,SAAA3B,WAAA;QACA;MACA;MACA,IAAAmC,QAAA;MACA,OAAAA,QAAA,CAAAC,IAAA,MAAApC,WAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}